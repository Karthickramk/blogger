<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Blogs</title>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<link rel='stylesheet' href='css/blog.css'>
</head>
<body>
	<h1>Blogs</h1>
	<hr />
	<a href='new.html'>New Post</a> |
	<input id="search_input" type="text"/>
	<a href='#' id="search">Search Blog</a> | Invite
	<input placeholder="email1, email2, email3"> |
	<a href='profile.html'>Krishna Mohan Koyya </a>|
	<a href='index.html'>Logout</a>
	<hr />
	<table>
		<tr>
			<td width="20%" valign="top">
				<h2>Favorite Posts</h2>
				<ul>
					<li><a href='home.html'>asdkjf saddflkj</a></li>
					<li><a href='home.html'>oioi oioi</a></li>
					<li><a href='home.html'>mkkjvnch sdf</a></li>
					<li><a href='home.html'>zxc zxv zcxcv</a></li>
				</ul>
			</td>
			<td valign="top" width='50%' id='blogContent'>
			</td>
			<td width="30%" valign="top">
				<h2>Messages</h2>
				<p>
					<u>krishna | 31 DEC 2016 3.45PM</u><br />asdf adlfkajsf
					asfllsdakfjsdad faslfdjasdfasf sdfllsdakfjs df
				</p>
				<p>
					<u>krishna | 31 DEC 2016 3.45PM</u><br />asdf adlfkajsf
					asfllsdakfjsdad faslfdjasdfasf sdfllsdakfjs df
				</p>
				<p>
					<u>mohan | 30 DEC 2016 3.45PM</u><br />asdf adlfkajsf
					asfllsdakfjsdad faslfdjasdfasf sdfllsdakfjs df
				</p>
				<hr /> <textarea></textarea><br />
				<button>Post Message</button>
			</td>
		</tr>
	</table>
<script>
$(document).ready(function() {
	$.ajax({
		url : 'http://localhost:8080/api/blog',
		type : 'get',
		accept : 'application/json',
		success : function(data) {
			$.each(data, function(index) {
				html = "<div><h2><span>"+data[index].title+"</span> <span>"+new Date(data[index].createdDate)+"</span></h2>"+
						"<p>"+data[index].blogContent+"</p> Leave a comment: <textarea id='"+index+"'></textarea>"+
						"<h3>Comments</h3>";
				comments = data[index].comments;	
				$.each(data[index].comments, function(comment_index) {
					html = html+"<b>"+comments[comment_index].commentDate+" | "+comments[comment_index].commentBy+" | "+comments[comment_index].comment+"</b>";
				});
				$("#blogContent").append(html);    
	        });
		}
	});
	$("#search").click(function() {
		var tag = 'http://localhost:8080/api/tag/blog/'+$("#search_input").val();
		$("#blogContent").html("");
		alert(tag)
		$.ajax({
			url : tag,
			type : 'get',
			accept : 'application/json',
			success : function(data) {
				$.each(data, function(index) {
					html = "<div><h2><span>"+data[index].title+"</span> <span>"+new Date(data[index].createdDate)+"</span></h2>"+
							"<p>"+data[index].blogContent+"</p> Leave a comment: <textarea id='"+index+"'></textarea>"+
							"<h3>Comments</h3>";
					comments = data[index].comments;	
					$.each(data[index].comments, function(comment_index) {
						html = html+"<b>"+comments[comment_index].commentDate+" | "+comments[comment_index].commentBy+" | "+comments[comment_index].comment+"</b>";
					});
					$("#blogContent").append(html);    
		        });
			}
		});
	});
});
</script>
</body>
</html>